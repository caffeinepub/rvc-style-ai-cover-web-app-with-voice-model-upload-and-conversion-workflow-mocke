{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "RVC Covers (mock workflow) — frontend app shell, auth gating, model/job UIs, and themed branding",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add core React app shell with navigation and three primary pages: Voice Models, Create Cover, and Jobs/History.",
      "acceptanceCriteria": [
        "User can navigate between Voice Models, Create Cover, and Jobs/History pages.",
        "Each page has clear English headings, helper text, and primary actions matching the page purpose.",
        "App uses the existing template stack (React + TS, Tailwind, shadcn/ui, React Query)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/App.tsx",
          "operation": "create",
          "description": "Create the top-level App with a layout shell (header + main) and route/page wiring for Voice Models, Create Cover, and Jobs/History, using React + TS and Tailwind styling (and shadcn/ui where available)."
        },
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Wire the newly created App component (if needed) and ensure React Query + InternetIdentityProvider wrapping remains intact for all pages."
        },
        {
          "path": "frontend/src/pages/VoiceModelsPage.tsx",
          "operation": "create",
          "description": "Create the Voice Models page scaffold (heading, helper text, primary actions region, and list region)."
        },
        {
          "path": "frontend/src/pages/CreateCoverPage.tsx",
          "operation": "create",
          "description": "Create the Create Cover page scaffold (heading, helper text, model selector region, audio upload region, submit region, status region)."
        },
        {
          "path": "frontend/src/pages/JobsHistoryPage.tsx",
          "operation": "create",
          "description": "Create the Jobs/History page scaffold (heading, helper text, list region, and detail view region or nested route outlet)."
        },
        {
          "path": "frontend/src/components/AppNav.tsx",
          "operation": "create",
          "description": "Create a navigation component with links/actions to Voice Models, Create Cover, and Jobs/History, designed to work on mobile and desktop."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Add Internet Identity sign-in UI and gate model/job actions behind authentication; scope queries/mutations to the authenticated user context.",
      "acceptanceCriteria": [
        "Unauthenticated users are prompted to sign in before they can upload models or submit conversions.",
        "After sign-in, the UI shows the user as signed in (e.g., principal shortened) and provides a sign-out action.",
        "Backend stores and returns models/jobs only for the caller principal."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/AuthGate.tsx",
          "operation": "create",
          "description": "Create an AuthGate wrapper that requires Internet Identity authentication before rendering protected page actions (upload model, submit conversion, view personal jobs). Use the selected \"authorization\" component guidance for authentication gating patterns. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/LoginButton.tsx",
          "operation": "create",
          "description": "Create a Login/Logout button using the existing useInternetIdentity hook, and on logout clear React Query cache (queryClient.clear) as recommended by the selected \"authorization\" component. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/UserBadge.tsx",
          "operation": "create",
          "description": "Create a small header badge that indicates signed-in state and displays a shortened principal (or equivalent) plus a sign-out action (English text)."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Integrate LoginButton/UserBadge into the app header and wrap protected sections/pages with AuthGate so unauthenticated users are prompted to sign in."
        },
        {
          "path": "frontend/src/hooks/useAuthedActor.ts",
          "operation": "create",
          "description": "Create a small helper hook built on top of useActor/useInternetIdentity to expose isAuthenticated and ensure React Query calls that access user-scoped data are enabled only when authenticated (prevent accidental unauthenticated reads)."
        },
        {
          "path": "frontend/src/hooks/useActor.ts",
          "operation": "modify",
          "description": "Ensure actor/identity changes properly invalidate queries (already present) and that the UI can reliably detect when the actor is ready for authenticated calls; keep behavior consistent with the selected \"authorization\" component patterns. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Build Voice Models UI: upload model with metadata + file picker, list user models, and delete with confirmation; wire to backend via React Query and blob uploads with progress.",
      "acceptanceCriteria": [
        "User can select a model file, enter metadata, upload, and see it appear in the models list.",
        "User can delete a model and it is removed from the list after confirmation.",
        "UI shows upload progress/state (e.g., uploading, success, error) and error messages are human-readable in English."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useVoiceModels.ts",
          "operation": "create",
          "description": "Create React Query hooks for listing the signed-in user's voice models, uploading a model, and deleting a model using the typed backend actor methods; include cache invalidation on mutations."
        },
        {
          "path": "frontend/src/components/VoiceModelUploadForm.tsx",
          "operation": "create",
          "description": "Create an upload form UI (name, description, optional tags/format, file picker) and wire to upload mutation; use the selected \"blob-storage\" component's ExternalBlob to upload file bytes and track upload progress (withUploadProgress). Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/VoiceModelsList.tsx",
          "operation": "create",
          "description": "Create a models list UI that renders model metadata (name/description/format/tags/createdAt) and provides a delete action with confirmation and readable error handling."
        },
        {
          "path": "frontend/src/pages/VoiceModelsPage.tsx",
          "operation": "modify",
          "description": "Wire VoiceModelUploadForm + VoiceModelsList into the Voice Models page, and gate upload/delete behind AuthGate. Show clear empty/loading/error states in English."
        },
        {
          "path": "frontend/src/utils/fileToBytes.ts",
          "operation": "create",
          "description": "Add a utility for converting browser File objects to Uint8Array bytes for creating ExternalBlob.fromBytes; centralize file-size checks and readable validation messages."
        },
        {
          "path": "frontend/src/components/InlineAlert.tsx",
          "operation": "create",
          "description": "Create a lightweight alert component for human-readable success/error messages (English), styled to match the app theme."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Build Create Cover UI: select a user model, upload source audio, submit a conversion job, poll status, and download result when complete.",
      "acceptanceCriteria": [
        "User can select one of their uploaded models from a dropdown/list.",
        "User can upload an audio file and submit a job.",
        "After submission, the UI shows the job status and updates it (polling via React Query) until completion or failure.",
        "When completed, the UI provides a download button for the result audio."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useConversionJobs.ts",
          "operation": "create",
          "description": "Create React Query hooks for creating a conversion job, fetching a single job, and listing jobs; include polling support for job status updates and cache invalidation on new jobs."
        },
        {
          "path": "frontend/src/components/ModelSelect.tsx",
          "operation": "create",
          "description": "Create a model selection component that consumes the voice models query and lets the user pick one model (clear labels, empty state guidance in English)."
        },
        {
          "path": "frontend/src/components/AudioUploadAndSubmit.tsx",
          "operation": "create",
          "description": "Create a component for choosing an input audio file, validating it, creating an ExternalBlob from bytes (selected \"blob-storage\" component), showing upload/progress state, and submitting a job. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/JobStatusCard.tsx",
          "operation": "create",
          "description": "Create a job status display card that shows pending/processing/complete/failed, last updated time, and any failure message (English)."
        },
        {
          "path": "frontend/src/utils/downloadExternalBlob.ts",
          "operation": "create",
          "description": "Add a helper that converts an ExternalBlob to a downloadable file (fetch bytes via getBytes, create a browser download), used for completed results."
        },
        {
          "path": "frontend/src/pages/CreateCoverPage.tsx",
          "operation": "modify",
          "description": "Wire ModelSelect + AudioUploadAndSubmit + JobStatusCard into the Create Cover page, ensure it is gated behind AuthGate, and enable polling until completion/failure."
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Build Jobs/History UI: list past jobs, view details, show status and errors, and allow downloading completed results.",
      "acceptanceCriteria": [
        "User can view a list of their jobs with timestamps, chosen model name, and status.",
        "User can open/view a single job’s details.",
        "Completed jobs show a download action; failed jobs show an English error message."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/JobsTable.tsx",
          "operation": "create",
          "description": "Create a jobs list/table component showing createdAt, model reference (and resolved model name when available), and status; include empty/loading/error states in English."
        },
        {
          "path": "frontend/src/components/JobDetailsPanel.tsx",
          "operation": "create",
          "description": "Create a job details view that displays job metadata, status timeline/fields, and a download action when complete (using the shared download helper)."
        },
        {
          "path": "frontend/src/pages/JobsHistoryPage.tsx",
          "operation": "modify",
          "description": "Wire the jobs list and job details UI into the Jobs/History page; gate data behind AuthGate and ensure completed jobs can be downloaded and failed jobs show readable error text."
        },
        {
          "path": "frontend/src/hooks/useModelNameLookup.ts",
          "operation": "create",
          "description": "Create a small hook/helper to map modelId -> model name using cached voice models query data (avoid extra fetches; keep UI responsive)."
        }
      ]
    },
    {
      "id": "REQ-9",
      "summary": "Apply a distinctive warm, music-creator theme (non-default; avoid blue/purple) across navigation, pages, and components using Tailwind + shadcn variable styling.",
      "acceptanceCriteria": [
        "Theme is consistent across all pages (navigation, forms, lists, buttons, alerts).",
        "Tailwind + shadcn/ui components are styled to match the chosen theme (not default).",
        "User-facing text is in English and reads like a polished product UI."
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "create",
          "description": "Add global styling + CSS variables for the app theme (warm dark neutrals with amber/orange accents; explicitly avoid blue/purple), including typography and consistent spacing defaults; ensure shadcn/ui tokens (background/foreground/primary/etc.) match the theme."
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Extend Tailwind theme as needed for the warm creator-tool palette (non-blue/purple) and ensure components/pages use consistent tokens (colors, radius, shadows)."
        },
        {
          "path": "frontend/src/components/AppLayout.tsx",
          "operation": "create",
          "description": "Create a layout wrapper that standardizes page spacing, max-width, background, and header styling to ensure a coherent theme across all pages."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Adopt AppLayout and ensure navigation, buttons, and page containers consistently use the new theme tokens and English product-quality microcopy."
        }
      ]
    },
    {
      "id": "REQ-10",
      "summary": "Add generated branding/illustration/icon assets under frontend/public/assets/generated and render them in the UI for logo and empty/hero states.",
      "acceptanceCriteria": [
        "Generated images are checked into frontend/public/assets/generated and referenced directly by the frontend (no backend image routing).",
        "At least one image is used for branding (logo) and one for a page empty/hero state.",
        "Images scale appropriately on mobile and desktop without layout breakage."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/rvc-covers-logo.dim_512x256.png",
          "operation": "create",
          "description": "Add the generated branding image asset (Minimalist monochrome wordmark logo reading \"RVC Covers\")."
        },
        {
          "path": "frontend/public/assets/generated/studio-illustration.dim_1600x900.png",
          "operation": "create",
          "description": "Add the generated hero/empty-state illustration asset (Stylized studio/microphone illustration with warm dark theme accents)."
        },
        {
          "path": "frontend/public/assets/generated/rvc-icons-set.dim_512x512.png",
          "operation": "create",
          "description": "Add the generated icon set asset (Three simple line icons: upload, waveform, download)."
        },
        {
          "path": "frontend/src/components/BrandLogo.tsx",
          "operation": "create",
          "description": "Create a brand logo component that renders frontend/public/assets/generated/rvc-covers-logo.dim_512x256.png with responsive sizing appropriate for the header."
        },
        {
          "path": "frontend/src/components/EmptyStateHero.tsx",
          "operation": "create",
          "description": "Create a reusable hero/empty-state component that uses frontend/public/assets/generated/studio-illustration.dim_1600x900.png (and optionally the icon set) with responsive layout and English guidance copy."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Render BrandLogo in the header/navigation area for consistent branding."
        },
        {
          "path": "frontend/src/pages/VoiceModelsPage.tsx",
          "operation": "modify",
          "description": "Use EmptyStateHero (with frontend/public/assets/generated/studio-illustration.dim_1600x900.png and/or frontend/public/assets/generated/rvc-icons-set.dim_512x512.png) when the user has no uploaded models."
        },
        {
          "path": "frontend/src/pages/CreateCoverPage.tsx",
          "operation": "modify",
          "description": "Use EmptyStateHero (with frontend/public/assets/generated/rvc-icons-set.dim_512x512.png) when no models exist yet, prompting the user to upload a voice model first."
        },
        {
          "path": "frontend/src/pages/JobsHistoryPage.tsx",
          "operation": "modify",
          "description": "Use EmptyStateHero (with frontend/public/assets/generated/rvc-icons-set.dim_512x512.png) when the user has no past jobs, and ensure the illustration scales without layout breakage."
        }
      ]
    }
  ]
}